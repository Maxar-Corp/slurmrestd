--- slurm.spec.orig	2022-11-16 10:01:20.472254667 +0100
+++ slurm.spec	2022-11-22 11:38:52.279380616 +0100
@@ -16,7 +16,7 @@
 
 Name:           slurm
 Version:        20.11.9
-Release:        1%{?dist}
+Release:        1mx%{?dist}
 Summary:        Simple Linux Utility for Resource Management
 License:        GPLv2 and BSD
 URL:            https://slurm.schedmd.com/
@@ -40,6 +40,10 @@
 Patch20:        slurm_pmix_soname.patch
 Patch21:        slurm_to_python3.patch
 
+# Maxar patches
+Patch100:       db_load.patch
+Patch101:       db_start_time.patch
+
 BuildRequires:  autoconf
 BuildRequires:  automake
 BuildRequires:  desktop-file-utils
@@ -183,7 +187,7 @@
 %if (0%{?fedora} >= 34) || 0%{?el7} || 0%{?el8}
 %package slurmrestd
 Summary: Slurm REST API deamon
-Requires: %{name}%{?_isa} = %{version}-%{release}
+Requires: %{name}%{?_isa} = %{version}-1%{?dist}
 %description slurmrestd
 Slurm REST API daemon.  The slurmrestd daemon is designed to allow clients
 to communicate with Slurm via a REST API.
@@ -258,9 +262,9 @@
 autoconf
 automake --no-force
 # use -fcommon for gcc 10 to avoid multiple definition errors
-export CFLAGS="%{build_cflags} -fcommon"
+#export CFLAGS="%{build_cflags} -fcommon"
 # use -z lazy to allow dlopen with unresolved symbols
-export LDFLAGS="%{build_ldflags} -Wl,-z,lazy"
+export LDFLAGS="-Wl,-z,lazy"
 %configure \
   --prefix=%{_prefix} \
   --sysconfdir=%{_sysconfdir}/%{name} \
@@ -769,6 +773,9 @@
 %systemd_postun_with_restart slurmdbd.service
 
 %changelog
+* Wed Nov 16 2022 Maxar <noreply@maxar.com> - 20.11.9-1mx
+- Add Maxar patches
+
 * Thu May 05 2022 Carl George <carl@george.computer> - 20.11.9-1
 - Update to 20.11.9, resolves: rhbz#2081896
 - Fix CVE-2022-29500, resolves: rhbz#2082285
